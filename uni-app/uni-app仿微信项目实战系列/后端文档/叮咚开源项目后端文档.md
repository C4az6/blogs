## 叮咚项目后端参考文档 v1.0

## 1.Egg.js基础

官方文档：https://eggjs.org/zh-cn/intro/index.html

### 1.1 什么是Egg.js？

**Egg.js 为企业级框架和应用而生**，我们希望由 Egg.js 孕育出更多上层框架，帮助开发团队和开发人员降低开发和维护成本。

就是Egg.js这个框架就是一个蛋，你的团队是鸡，你就可以孵化出鸡蛋，是鸭就是鸭蛋，是鹅就是鹅蛋，说白了就是根据Egg.js这个基础框架针对自己公司业务来封装上层框架，Egg.js不仅有约定，而且拓展性强，很适合企业级团队开发。

> [Express](http://expressjs.com/) 是 Node.js 社区广泛使用的框架，简单且扩展性强，非常适合做个人项目。但框架本身缺少约定，标准的 MVC 模型会有各种千奇百怪的写法。Egg 按照约定进行开发，奉行『约定优于配置』，团队协作成本低。

而且Egg.js是插件机制，他不会直接集成很多功能，例如ORM、模板引擎等，Egg.js是通过插件方式实现这类功能，你需要的时候你再引入即可。

记住下面的几个特性，使用过程中反复品味。

- 提供基于 Egg [定制上层框架](https://eggjs.org/zh-cn/advanced/framework.html)的能力
- 高度可扩展的[插件机制](https://eggjs.org/zh-cn/basics/plugin.html)
- 内置[多进程管理](https://eggjs.org/zh-cn/advanced/cluster-client.html)
- 基于 [Koa](http://koajs.com/) 开发，性能优异
- 框架稳定，测试覆盖率高
- [渐进式开发](https://eggjs.org/zh-cn/tutorials/progressive.html)

更多的介绍例如 异步编程、和其他框架对比之类的看官网吧。

### 1.2 创建第一个egg项目

我们推荐直接使用脚手架，只需几条简单指令，即可快速生成项目（`npm >=6.1.0`）:

```
$ mkdir egg-example && cd egg-example
$ npm init egg --type=simple
$ npm i
$ npm run dev
```



### 1.3 目录结构

```
egg-project
├── package.json
├── app.js (可选)
├── agent.js (可选)
├── app（-----------核心------------）
|   ├── router.js（路由）
│   ├── controller（控制器）
│   |   └── home.js
│   ├── service (模型)
│   |   └── user.js
│   ├── middleware (中间件)
│   |   └── response_time.js
│   ├── schedule (可选)
│   |   └── my_task.js
│   ├── public (静态资源)
│   |   └── reset.css
│   ├── view (模板视图)
│   |   └── home.tpl
│   └── extend (扩展)
│       ├── helper.js (可选)
│       ├── request.js (可选)
│       ├── response.js (可选)
│       ├── context.js (可选)
│       ├── application.js (可选)
│       └── agent.js (可选)
├── config
|   ├── plugin.js
|   ├── config.default.js
│   ├── config.prod.js
|   ├── config.test.js (可选)
|   ├── config.local.js (可选)
|   └── config.unittest.js (可选)
└── test
    ├── middleware
    |   └── response_time.test.js
    └── controller
        └── home.test.js
```



### 1.4 编写第一个API接口

![1622628144415](medias/1622628144415.png)

第三步打开`app`目录下面的`router.js`文件，增加路由即可。

![1622628203632](medias/1622628203632.png)

到此就是编写一个最最最基础的API接口的方法了。









