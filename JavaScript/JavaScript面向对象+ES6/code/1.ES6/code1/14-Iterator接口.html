<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /* 
      Iterator遍历器的作用：
      1.为各种数据结构，提供一个统一的、简便的访问接口。
      2.使得数据结构的成员能够按某种次序排列
      3.ES6新增了遍历命令for...of循环，Iterator接口主要供for...of消费。
     */


    // 1 手写Iterator接口
    // const arr = [0,1, 2, 3];

    // function iterator(arr) {
    //   let index = 0;
    //   return {
    //     next: function () {
    //       return index < arr.length ? {
    //         value: arr[index++],
    //         done: false
    //       } : {
    //         value: undefined,
    //         done: true
    //       }
    //     }
    //   }
    // }
    // const it = iterator(arr);
    // console.log(it.next())
    // console.log(it.next())
    // console.log(it.next())
    // console.log(it.next())
    // console.log(it.next())

    // 2 凡是具有 Symbol.iterator 属性的数据结构都具有Iterator接口
    const arr = [1,2,3];
    const set = new Set(['a','b','c']);
    const map = new Map([['a', 1]]);

    const itArr = arr[Symbol.iterator]();
    const itSet = set[Symbol.iterator]();
    const itMap = map[Symbol.iterator]();

    console.log(itSet.next());  // {value: "a", done: false}
    console.log(itSet.next());  // {value: "b", done: false}
    console.log(itSet.next());  // {value: "c", done: false}
    console.log(itSet.next());  // {value: undefined, done: true}

    const obj = {};
    console.log(obj[Symbol.iterator]);    // undefined 因为obj数据类型不是一个可迭代对象,所以没有Symbol.iterator属性

  /* 
      3 具备iterator接口的数据结构都可以进行如下操作
        1.解构赋值
        2.拓展运算
   */

  let [x, y] = set;
  console.log(x,y);   // a,b

  let str = '吃透javascript';
  console.log([...str])

  const arr2 = [{}, 1, 'a', 1, 'a', 'b', [], function(){console.log(' comming ')}];
  console.log('去重前: ', arr2)
  console.log('去重后: ', [...new Set(arr2)]);
  arr2[arr2.length-1]();


  /* 
      4 for...of循环
   */

  const ofArr = [1,2,3,4];
  for(let i of ofArr) {
    console.log(i)
  }

  const m = new Map();
  m.set('a', 1).set('b', 2).set('c', 3);
  for(let [key,value] of m) {
    console.log(key, value)
  }

  </script>
</body>

</html>